{"ast":null,"code":"import _classCallCheck from\"/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Canvas from'../components/canvas.component';import PieceGenerator from'../components/generator/piece-generator';import mainService from'../services/main.service';import PieceCard from'./piece-card';import Config from\"./config.json\";/**\n * \n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PieceCardComponent=/*#__PURE__*/function(_Component){_inherits(PieceCardComponent,_Component);var _super=_createSuper(PieceCardComponent);function PieceCardComponent(props){var _this;_classCallCheck(this,PieceCardComponent);_this=_super.call(this,props);_this.state={//    pieceId: this.props.pieceId,\nwidth:160,height:300,pieceImage:\"\",piece:{},pieceCard:new PieceCard(),actions:{},//consts\nactionsSize:9,actionsOffsetX:13,actionsOffsetY:160,imageOffsetX:32,imageOffsetY:10};return _this;}_createClass(PieceCardComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var pieceId=this.props.pieceId;console.log(\"pieceId \",pieceId);if(pieceId){if(pieceId!==\"\"){mainService.generatePiece(pieceId).then(function(res){var pg=new PieceGenerator(100,120,\"\"+pieceId);_this2.setState({actions:res.data.actionMap.actions,piece:res.data,pieceImage:pg.drawPieceCanvas(\"P1\")});console.log(res.data);});}}}// static getDerivedStateFromProps(props, state) {\n//     if (props.pieceId !== state.pieceId) {\n//         //Change in props\n//         console.log(props.pieceId);\n//         return {\n//             pieceId: props.pieceId\n//         };\n//     }\n//     return null; // No change to state\n// }\n},{key:\"drawCanvas\",value:function drawCanvas(){var _this$state=this.state,pieceCard=_this$state.pieceCard,piece=_this$state.piece,pieceImage=_this$state.pieceImage,actions=_this$state.actions;var draw=function draw(ctx,frameCount){ctx.canvas.width=Config.card.width;ctx.canvas.height=Config.card.height;ctx.drawImage(pieceCard.drawPieceCard(actions,pieceImage),0,0);};return draw;}},{key:\"render\",value:function render(){var _this$state2=this.state,piece=_this$state2.piece,pieceImage=_this$state2.pieceImage;if(piece&&pieceImage){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Canvas,{draw:this.drawCanvas()}),\" \"]});}return\"\";}}]);return PieceCardComponent;}(Component);export default PieceCardComponent;","map":{"version":3,"sources":["/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/src/game/piece-card.component.jsx"],"names":["React","Component","Canvas","PieceGenerator","mainService","PieceCard","Config","PieceCardComponent","props","state","width","height","pieceImage","piece","pieceCard","actions","actionsSize","actionsOffsetX","actionsOffsetY","imageOffsetX","imageOffsetY","pieceId","console","log","generatePiece","then","res","pg","setState","data","actionMap","drawPieceCanvas","draw","ctx","frameCount","canvas","card","drawImage","drawPieceCard","drawCanvas"],"mappings":"4gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,yCAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CAEA;AACA;AACA,G,2FACMC,CAAAA,kB,wHAEF,4BAAYC,KAAZ,CAAmB,oDAEf,uBAAMA,KAAN,EAGA,MAAKC,KAAL,CAAa,CACT;AACAC,KAAK,CAAE,GAFE,CAGTC,MAAM,CAAE,GAHC,CAITC,UAAU,CAAE,EAJH,CAMTC,KAAK,CAAE,EANE,CAOTC,SAAS,CAAE,GAAIT,CAAAA,SAAJ,EAPF,CAQTU,OAAO,CAAE,EARA,CAUT;AACAC,WAAW,CAAE,CAXJ,CAYTC,cAAc,CAAE,EAZP,CAaTC,cAAc,CAAE,GAbP,CAeTC,YAAY,CAAE,EAfL,CAgBTC,YAAY,CAAE,EAhBL,CAAb,CALe,aAuBlB,C,gEAED,4BAAoB,iBAChB,GAAQC,CAAAA,OAAR,CAAoB,KAAKb,KAAzB,CAAQa,OAAR,CAEAC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBF,OAAxB,EACA,GAAIA,OAAJ,CAAa,CACT,GAAIA,OAAO,GAAK,EAAhB,CAAoB,CAChBjB,WAAW,CAACoB,aAAZ,CAA0BH,OAA1B,EAAmCI,IAAnC,CAAwC,SAAAC,GAAG,CAAI,CAC3C,GAAIC,CAAAA,EAAE,CAAG,GAAIxB,CAAAA,cAAJ,CAAmB,GAAnB,CAAwB,GAAxB,CAA6B,GAAKkB,OAAlC,CAAT,CACA,MAAI,CAACO,QAAL,CAAc,CACVb,OAAO,CAAEW,GAAG,CAACG,IAAJ,CAASC,SAAT,CAAmBf,OADlB,CAEVF,KAAK,CAAEa,GAAG,CAACG,IAFD,CAGVjB,UAAU,CAAEe,EAAE,CAACI,eAAH,CAAmB,IAAnB,CAHF,CAAd,EAKAT,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACG,IAAhB,EACH,CARD,EAUH,CACJ,CACJ,CAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;0BAIA,qBAAa,CACT,gBAAkD,KAAKpB,KAAvD,CAAQK,SAAR,aAAQA,SAAR,CAAmBD,KAAnB,aAAmBA,KAAnB,CAA0BD,UAA1B,aAA0BA,UAA1B,CAAsCG,OAAtC,aAAsCA,OAAtC,CAEA,GAAMiB,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,GAAD,CAAMC,UAAN,CAAqB,CAC9BD,GAAG,CAACE,MAAJ,CAAWzB,KAAX,CAAmBJ,MAAM,CAAC8B,IAAP,CAAY1B,KAA/B,CACAuB,GAAG,CAACE,MAAJ,CAAWxB,MAAX,CAAoBL,MAAM,CAAC8B,IAAP,CAAYzB,MAAhC,CACAsB,GAAG,CAACI,SAAJ,CAAcvB,SAAS,CAACwB,aAAV,CAAwBvB,OAAxB,CAAiCH,UAAjC,CAAd,CAA4D,CAA5D,CAA+D,CAA/D,EACH,CAJD,CAKA,MAAOoB,CAAAA,IAAP,CACH,C,sBAKD,iBAAS,CACL,iBAA8B,KAAKvB,KAAnC,CAAQI,KAAR,cAAQA,KAAR,CAAeD,UAAf,cAAeA,UAAf,CACA,GAAIC,KAAK,EAAID,UAAb,CAAyB,CACrB,mBAAQ,oCAAK,KAAC,MAAD,EAAQ,IAAI,CAAE,KAAK2B,UAAL,EAAd,EAAL,OAAR,CACH,CACD,MAAO,EAAP,CACH,C,gCAjF4BtC,S,EAoFjC,cAAeM,CAAAA,kBAAf","sourcesContent":["import React, { Component } from 'react'\nimport Canvas from '../components/canvas.component';\nimport PieceGenerator from '../components/generator/piece-generator';\nimport mainService from '../services/main.service';\nimport PieceCard from './piece-card';\nimport Config from \"./config.json\";\n\n/**\n * \n */\nclass PieceCardComponent extends Component {\n\n    constructor(props) {\n\n        super(props);\n\n\n        this.state = {\n            //    pieceId: this.props.pieceId,\n            width: 160,\n            height: 300,\n            pieceImage: \"\",\n\n            piece: {},\n            pieceCard: new PieceCard(),\n            actions: {},\n\n            //consts\n            actionsSize: 9,\n            actionsOffsetX: 13,\n            actionsOffsetY: 160,\n\n            imageOffsetX: 32,\n            imageOffsetY: 10\n        }\n    }\n\n    componentDidMount() {\n        const { pieceId } = this.props;\n\n        console.log(\"pieceId \", pieceId);\n        if (pieceId) {\n            if (pieceId !== \"\") {\n                mainService.generatePiece(pieceId).then(res => {\n                    var pg = new PieceGenerator(100, 120, \"\" + pieceId);\n                    this.setState({\n                        actions: res.data.actionMap.actions,\n                        piece: res.data,\n                        pieceImage: pg.drawPieceCanvas(\"P1\")\n                    });\n                    console.log(res.data);\n                }\n                );\n            }\n        }\n    }\n\n\n    // static getDerivedStateFromProps(props, state) {\n    //     if (props.pieceId !== state.pieceId) {\n    //         //Change in props\n    //         console.log(props.pieceId);\n    //         return {\n    //             pieceId: props.pieceId\n    //         };\n    //     }\n    //     return null; // No change to state\n    // }\n\n\n\n    drawCanvas() {\n        const { pieceCard, piece, pieceImage, actions } = this.state;\n\n        const draw = (ctx, frameCount) => {\n            ctx.canvas.width = Config.card.width;\n            ctx.canvas.height = Config.card.height;\n            ctx.drawImage(pieceCard.drawPieceCard(actions, pieceImage), 0, 0);\n        }\n        return draw;\n    }\n\n\n\n\n    render() {\n        const { piece, pieceImage } = this.state;\n        if (piece && pieceImage) {\n            return (<div><Canvas draw={this.drawCanvas()} /> </div>);\n        }\n        return \"\";\n    }\n}\n\nexport default PieceCardComponent"]},"metadata":{},"sourceType":"module"}