{"ast":null,"code":"var _jsxFileName = \"/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/src/game/piece-card.component.jsx\";\nimport React, { Component } from 'react';\nimport Canvas from '../components/canvas.component';\nimport PieceGenerator from '../components/generator/piece-generator';\nimport mainService from '../services/main.service';\nimport PieceCard from './piece-card';\nimport Config from \"./config.json\";\n/**\n * \n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PieceCardComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      //    pieceId: this.props.pieceId,\n      width: 160,\n      height: 300,\n      pieceImage: \"\",\n      piece: {},\n      pieceCard: new PieceCard(),\n      actions: {},\n      //consts\n      actionsSize: 9,\n      actionsOffsetX: 13,\n      actionsOffsetY: 160,\n      imageOffsetX: 32,\n      imageOffsetY: 10\n    };\n  }\n\n  componentDidMount() {\n    const {\n      pieceId\n    } = this.props;\n\n    if (pieceId) {\n      if (pieceId !== \"\") {\n        mainService.generatePiece(pieceId).then(res => {\n          var pg = new PieceGenerator(100, 120, \"\" + pieceId);\n          this.setState({\n            actions: res.data.actionMap.actions,\n            piece: res.data,\n            pieceImage: pg.drawPieceCanvas(\"P1\")\n          });\n          console.log(res.data);\n        });\n      }\n    }\n  } // static getDerivedStateFromProps(props, state) {\n  //     if (props.pieceId !== state.pieceId) {\n  //         //Change in props\n  //         console.log(props.pieceId);\n  //         return {\n  //             pieceId: props.pieceId\n  //         };\n  //     }\n  //     return null; // No change to state\n  // }\n\n\n  drawCanvas() {\n    const {\n      pieceCard,\n      piece,\n      pieceImage,\n      actions\n    } = this.state;\n\n    const draw = (ctx, frameCount) => {\n      ctx.canvas.width = Config.card.width;\n      ctx.canvas.height = Config.card.height;\n      ctx.drawImage(pieceCard.drawPieceCard(actions, pieceImage, undefined, undefined, piece.seed), 0, 0);\n    };\n\n    return draw;\n  }\n\n  render() {\n    const {\n      piece,\n      pieceImage\n    } = this.state;\n\n    if (piece && pieceImage) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Canvas, {\n          draw: this.drawCanvas()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 26\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this);\n    }\n\n    return \"\";\n  }\n\n}\n\nexport default PieceCardComponent;","map":{"version":3,"sources":["/home/ich/Entwicklung/FreeChazz/repos/FreeChazzFE/src/game/piece-card.component.jsx"],"names":["React","Component","Canvas","PieceGenerator","mainService","PieceCard","Config","PieceCardComponent","constructor","props","state","width","height","pieceImage","piece","pieceCard","actions","actionsSize","actionsOffsetX","actionsOffsetY","imageOffsetX","imageOffsetY","componentDidMount","pieceId","generatePiece","then","res","pg","setState","data","actionMap","drawPieceCanvas","console","log","drawCanvas","draw","ctx","frameCount","canvas","card","drawImage","drawPieceCard","undefined","seed","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Canvas from '../components/canvas.component';\nimport PieceGenerator from '../components/generator/piece-generator';\nimport mainService from '../services/main.service';\nimport PieceCard from './piece-card';\nimport Config from \"./config.json\";\n\n/**\n * \n */\nclass PieceCardComponent extends Component {\n\n    constructor(props) {\n\n        super(props);\n\n\n        this.state = {\n            //    pieceId: this.props.pieceId,\n            width: 160,\n            height: 300,\n            pieceImage: \"\",\n\n            piece: {},\n            pieceCard: new PieceCard(),\n            actions: {},\n\n            //consts\n            actionsSize: 9,\n            actionsOffsetX: 13,\n            actionsOffsetY: 160,\n\n            imageOffsetX: 32,\n            imageOffsetY: 10\n        }\n    }\n\n    componentDidMount() {\n        const { pieceId } = this.props;\n\n        if (pieceId) {\n            if (pieceId !== \"\") {\n                mainService.generatePiece(pieceId).then(res => {\n                    var pg = new PieceGenerator(100, 120, \"\" + pieceId);\n                    this.setState({\n                        actions: res.data.actionMap.actions,\n                        piece: res.data,\n                        pieceImage: pg.drawPieceCanvas(\"P1\")\n                    });\n                    console.log(res.data);\n                }\n                );\n            }\n        }\n    }\n\n\n    // static getDerivedStateFromProps(props, state) {\n    //     if (props.pieceId !== state.pieceId) {\n    //         //Change in props\n    //         console.log(props.pieceId);\n    //         return {\n    //             pieceId: props.pieceId\n    //         };\n    //     }\n    //     return null; // No change to state\n    // }\n\n\n\n    drawCanvas() {\n        const { pieceCard, piece, pieceImage, actions } = this.state;\n\n        const draw = (ctx, frameCount) => {\n            ctx.canvas.width = Config.card.width;\n            ctx.canvas.height = Config.card.height;\n            ctx.drawImage(pieceCard.drawPieceCard(actions, pieceImage, undefined, undefined, piece.seed), 0, 0);\n        }\n        return draw;\n    }\n\n\n\n\n    render() {\n        const { piece, pieceImage } = this.state;\n        if (piece && pieceImage) {\n            return (<div><Canvas draw={this.drawCanvas()} /> </div>);\n        }\n        return \"\";\n    }\n}\n\nexport default PieceCardComponent"]},"metadata":{},"sourceType":"module"}